{"version":3,"sources":["components/Helper.js","components/Table.js","components/FavouritesPage.js","components/HomePage.js","App.js","index.js"],"names":["atLeast2dp","num","newNum","parseFloat","toFixed","Math","max","toString","split","length","toLocaleString","supportedCurrencies","Table","loading","data","setData","favourites","setFavourites","currency","useState","sort","setSort","handleSort","prop","a","b","sortByProperty","favButton","id","updateFunc","text","findIndex","item","arr","value","index","indexOf","splice","removeFromArray","type","onClick","CircularProgress","className","toUpperCase","map","x","market_cap_rank","name","symbol","current_price","total_volume","sparkline_in_7d","price","color","price_change_percentage_7d_in_currency","FavouritesPage","setLoading","setCurrency","useEffect","favouritesData","i","fetch","response","json","newData","push","market_data","sparkline_7d","price_change_percentage_7d","fetchData","onChange","e","target","c","HomePage","page","setPage","p","App","to","exact","path","render","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.299ada45.chunk.js","sourcesContent":["// Remove single element from array\nexport const removeFromArray = (arr, value) => {\n\tvar index = arr.indexOf(value);\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t}\n\treturn arr;\n};\n\n// Ensure numbers are comma-separated and at least 2DP\nexport const atLeast2dp = (num) => {\n\tlet newNum = parseFloat(num.toFixed(Math.max(2, (num.toString().split(\".\")[1] || []).length))).toLocaleString(\"en\");\n\tif (newNum.split(\".\").length === 1) newNum += \".00\";\n\treturn newNum;\n};\n\n// From CoinGecko API\nexport const supportedCurrencies = [\n  \"btc\",\n  \"eth\",\n  \"ltc\",\n  \"bch\",\n  \"bnb\",\n  \"eos\",\n  \"xrp\",\n  \"xlm\",\n  \"link\",\n  \"dot\",\n  \"yfi\",\n  \"usd\",\n  \"aed\",\n  \"ars\",\n  \"aud\",\n  \"bdt\",\n  \"bhd\",\n  \"bmd\",\n  \"brl\",\n  \"cad\",\n  \"chf\",\n  \"clp\",\n  \"cny\",\n  \"czk\",\n  \"dkk\",\n  \"eur\",\n  \"gbp\",\n  \"hkd\",\n  \"huf\",\n  \"idr\",\n  \"ils\",\n  \"inr\",\n  \"jpy\",\n  \"krw\",\n  \"kwd\",\n  \"lkr\",\n  \"mmk\",\n  \"mxn\",\n  \"myr\",\n  \"ngn\",\n  \"nok\",\n  \"nzd\",\n  \"php\",\n  \"pkr\",\n  \"pln\",\n  \"rub\",\n  \"sar\",\n  \"sek\",\n  \"sgd\",\n  \"thb\",\n  \"try\",\n  \"twd\",\n  \"uah\",\n  \"vef\",\n  \"vnd\",\n  \"zar\",\n  \"xdr\",\n  \"xag\",\n  \"xau\",\n  \"bits\",\n  \"sats\"\n]","import { CircularProgress } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { Sparklines, SparklinesLine } from \"react-sparklines\";\nimport { atLeast2dp, removeFromArray } from \"./Helper\";\n\n// Reuse for homepage and favourites\nexport default function Table({ loading, data, setData, favourites, setFavourites, currency }) {\n\t// Toggle for sort order\n\tconst [sort, setSort] = useState(1);\n\n\tconst sortByProperty = (prop) => {\n\t\treturn function (a, b) {\n\t\t\tif (a[prop] > b[prop]) return -sort;\n\t\t\tif (a[prop] < b[prop]) return sort;\n\t\t\treturn 0;\n\t\t};\n\t};\n\n\tconst handleSort = (prop) => {\n\t\t// need to clone data first to trigger re-render (sort is done in place)\n\t\tsetData([...data].sort(sortByProperty(prop)));\n\t\t// Toggle ordering\n\t\tsetSort((sort) => -sort);\n\t};\n\n\t// Build favButton depending on favourites status\n\tconst favButton = (id) => {\n\t\tconst index = favourites.findIndex((item) => item === id);\n\t\tlet updateFunc;\n\t\tlet text;\n\t\tif (index === -1) {\n\t\t\tupdateFunc = () => setFavourites([...favourites, id]);\n\t\t\ttext = \"Add\";\n\t\t} else {\n\t\t\tupdateFunc = () => setFavourites(removeFromArray([...favourites], id));\n\t\t\ttext = \"Remove\";\n\t\t}\n\t\treturn (\n\t\t\t<button type=\"button\" onClick={updateFunc}>\n\t\t\t\t{text}\n\t\t\t</button>\n\t\t);\n\t};\n\n\treturn loading ? (\n\t\t<div>\n\t\t\t<CircularProgress className=\"spinner\" />\n\t\t</div>\n\t) : (data.length === 0 ? <div className=\"favourites\">No favourites!</div> : ( // Only possible for favourites page\n\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr className=\"table-header\">\n\t\t\t\t\t<th onClick={() => handleSort(\"market_cap_rank\")}>#</th>\n\t\t\t\t\t<th onClick={() => handleSort(\"name\")}>Name</th>\n\t\t\t\t\t<th onClick={() => handleSort(\"symbol\")}>Symbol</th>\n\t\t\t\t\t<th onClick={() => handleSort(\"current_price\")}>Price ({currency.toUpperCase()})</th>\n\t\t\t\t\t<th onClick={() => handleSort(\"total_volume\")}>Volume ({currency.toUpperCase()})</th>\n\t\t\t\t\t<th>Sparkline (USD)</th>\n\t\t\t\t\t<th>Favourite</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{data.map((x) => (\n\t\t\t\t\t<tr key={x.id} className=\"table-row\">\n\t\t\t\t\t\t<td>{x.market_cap_rank}</td>\n\t\t\t\t\t\t<td>{x.name}</td>\n\t\t\t\t\t\t<td>{x.symbol}</td>\n\t\t\t\t\t\t<td>{atLeast2dp(x.current_price)}</td>\n\t\t\t\t\t\t<td>{x.total_volume.toLocaleString(\"en-US\")}</td>\n\t\t\t\t\t\t<td className=\"sparkline\">\n\t\t\t\t\t\t\t<Sparklines data={x.sparkline_in_7d.price}>\n\t\t\t\t\t\t\t\t<SparklinesLine\n\t\t\t\t\t\t\t\t\tcolor={x.price_change_percentage_7d_in_currency > 0 ? \"#7ab52b\" : \"red\"}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Sparklines>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>{favButton(x.id)}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t))}\n\t\t\t</tbody>\n\t\t</table>\n\t));\n}\n","import React, { useEffect, useState } from \"react\";\nimport { supportedCurrencies } from \"./Helper\";\nimport Table from \"./Table\";\n\nexport default function FavouritesPage({ favourites, setFavourites }) {\n\t// Toggle spinner\n\tconst [loading, setLoading] = useState(false);\n\t// Pass data to table\n\tconst [data, setData] = useState([]);\n\tconst [currency, setCurrency] = useState(\"usd\");\n\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\tsetLoading(true);\n\t\t\tlet favouritesData = [];\n\t\t\tfor (var i in favourites) {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`https://api.coingecko.com/api/v3/coins/${favourites[i]}?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=true`\n\t\t\t\t);\n\t\t\t\tconst newData = await response.json();\n\t\t\t\t// prep data cuz format is different from HomePage endpoint\n\t\t\t\tfavouritesData.push({\n\t\t\t\t\tid: newData.id,\n\t\t\t\t\tname: newData.name,\n\t\t\t\t\tsymbol: newData.symbol,\n\t\t\t\t\tmarket_cap_rank: newData.market_cap_rank,\n\t\t\t\t\tcurrent_price: newData.market_data.current_price[currency],\n\t\t\t\t\ttotal_volume: newData.market_data.total_volume[currency],\n\t\t\t\t\tsparkline_in_7d: newData.market_data.sparkline_7d,\n\t\t\t\t\tprice_change_percentage_7d_in_currency:\n\t\t\t\t\t\tnewData.market_data.price_change_percentage_7d,\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetData(favouritesData);\n\t\t\tsetLoading(false);\n\t\t};\n\n\t\tfetchData();\n\t}, [favourites, currency]);\n\n\treturn (\n\t\t<div className=\"main\">\n\t\t\t<select name=\"currency\" onChange={(e) => setCurrency(e.target.value)}>\n\t\t\t\t<option value=\"usd\">USD</option>\n\t\t\t\t{supportedCurrencies.map((c) => (c !== \"usd\" ?\n\t\t\t\t\t<option value={c}>{c.toUpperCase()}</option> : null\n\t\t\t\t))}\n\t\t\t</select>\n\t\t\t<Table loading={loading} data={data} setData={setData} favourites={favourites} setFavourites={setFavourites} currency={currency} />\n\t\t</div>\n\t);\n}\n","import { useEffect, useState } from \"react\";\nimport { supportedCurrencies } from \"./Helper\";\nimport Table from \"./Table\";\n\nexport default function HomePage({ favourites, setFavourites }) {\n\t// Toggle loading\n\tconst [loading, setLoading] = useState(false);\n\t// Pagination of coins\n\tconst [page, setPage] = useState(1);\n\t// To pass down to table\n\tconst [data, setData] = useState([]);\n\tconst [currency, setCurrency] = useState(\"usd\");\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\tsetLoading(true);\n\t\t\tconst response = await fetch(\n\t\t\t\t`https://api.coingecko.com/api/v3/coins/markets?vs_currency=${currency}&per_page=20&page=${page}&sparkline=true&price_change_percentage=7d`\n\t\t\t);\n\t\t\tconst newData = await response.json();\n\t\t\tsetData(newData);\n\t\t\tsetLoading(false);\n\t\t};\n\n\t\tfetchData();\n\t}, [page, currency]);\n\n\tconst handleDecrement = (e) => {\n\t\tif (page > 1) {\n\t\t\tsetPage((p) => p - 1);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"main\">\n\t\t\t<button type=\"button\" onClick={handleDecrement}>\n\t\t\t\tPrev\n\t\t\t</button>\n\t\t\t<button type=\"button\" onClick={() => setPage((p) => p + 1)}>\n\t\t\t\tNext\n\t\t\t</button>\n\t\t\t<select name=\"currency\" onChange={(e) => setCurrency(e.target.value)}>\n\t\t\t\t<option value=\"usd\">USD</option>\n\t\t\t\t{supportedCurrencies.map((c) => (c !== \"usd\" ?\n\t\t\t\t\t<option value={c}>{c.toUpperCase()}</option> : null\n\t\t\t\t))}\n\t\t\t</select>\n\t\t\t<Table loading={loading} data={data} setData={setData} favourites={favourites} setFavourites={setFavourites} currency={currency}/>\n\t\t</div>\n\t);\n}\n","import \"./App.css\";\nimport { BrowserRouter as Router, Link, Route } from \"react-router-dom\";\nimport FavouritesPage from \"./components/FavouritesPage\";\nimport HomePage from \"./components/HomePage\";\nimport { useState } from \"react\";\n\nfunction App() {\n\tconst [favourites, setFavourites] = useState([]);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Router>\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<button type=\"button\">Home</button>\n\t\t\t\t</Link>\n\t\t\t\t<Link to=\"/favourites\">\n\t\t\t\t\t<button type=\"button\">Favourites</button>\n\t\t\t\t</Link>\n\t\t\t\t<Route exact path=\"/\" render={() => <HomePage favourites={favourites} setFavourites={setFavourites} />} />\n\t\t\t\t<Route path=\"/favourites\" render={() => <FavouritesPage favourites={favourites} setFavourites={setFavourites} />} />\n\t\t\t</Router>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}